"use strict";function GameBoard(e){this.boardSize=e}function Player(e,a,t,o,r,l){this.name=e,this.score=a,this.itemClass=t,this.player=o,this.weapon=r,this.damage=l}function Avatar(e,a,t,o,r){this.active=e,this.notActive=a,this.attack=t,this.win=o,this.dead=r}function setPlayerData(e,a,t){$(e+" .player-name").text(a.name),$(e+" .score").text(a.score),$(e+" .belt").removeClass().addClass("belt "+a.weapon),$(e+" .weapon-value").text(a.damage),player1AvatarDiv.css("backgroundImage","url("+player1Avatar.active+")"),player2AvatarDiv.css("backgroundImage","url("+player2Avatar.notActive+")")}function movePlayer(){function e(e){move?alert(e):alert(alertAttackDefend)}var a=$(".box");a.hover(function(){hover=!0;var e=$(this).attr("boxID");newPos=getXYPosition(e);for(var a=Math.min(oldPos.x,newPos.x);a<=Math.max(oldPos.x,newPos.x);a++){var t=getSquareValue(a,oldPos.y),o=$(".box[boxID = "+t+"]");if(o.hasClass("obstacle"))return;if(player1Active){if(o.hasClass("player2"))return}else if(o.hasClass("player1"))return}for(var r=Math.min(oldPos.y,newPos.y);r<=Math.max(oldPos.y,newPos.y);r++){var l=getSquareValue(oldPos.x,r),s=$(".box[boxID = "+l+"]");if(s.hasClass("obstacle"))return;if(player1Active){if(s.hasClass("player2"))return}else if(s.hasClass("player1"))return}attacked||(newPos.y===oldPos.y&&newPos.x<=oldPos.x+maxMoves&&newPos.x>=oldPos.x-maxMoves||newPos.x===oldPos.x&&newPos.y<=oldPos.y+maxMoves&&newPos.y>=oldPos.y-maxMoves)&&(player1Active?$(this).css("backgroundImage","url("+player1Avatar.active+")"):$(this).css("backgroundImage","url("+player2Avatar.active+")"))},function(){hover=!1,$(this).css("backgroundImage","")}),a.on("click",function(a){hover=!1;var t=$(this).attr("boxID");newPos=getXYPosition(t);for(var o=Math.min(oldPos.x,newPos.x);o<=Math.max(oldPos.x,newPos.x);o++){var r=getSquareValue(o,oldPos.y),l=$(".box[boxID = "+r+"]");if(l.hasClass("obstacle"))return void e(alertMove);if(player1Active){if(l.hasClass("player2"))return void e(alertPlayer)}else if(l.hasClass("player1"))return void e(alertPlayer)}for(var s=Math.min(oldPos.y,newPos.y);s<=Math.max(oldPos.y,newPos.y);s++){var i=getSquareValue(oldPos.x,s),n=$(".box[boxID = "+i+"]");if(n.hasClass("obstacle"))return void e(alertMove);if(player1Active){if(n.hasClass("player2"))return void e(alertPlayer)}else if(n.hasClass("player1"))return void e(alertPlayer)}if(player1Active){if($(this).hasClass("player1"))return void e(alertMustMove)}else if($(this).hasClass("player2"))return void e(alertMustMove);if(move&&(newPos.y===oldPos.y&&newPos.x<=oldPos.x+maxMoves&&newPos.x>=oldPos.x-maxMoves||newPos.x===oldPos.x&&newPos.y<=oldPos.y+maxMoves&&newPos.y>=oldPos.y-maxMoves)){for(var c=Math.min(oldPos.x,newPos.x);c<=Math.max(oldPos.x,newPos.x);c++)checkWeapon(getSquareValue(c,oldPos.y));for(var v=Math.min(oldPos.y,newPos.y);v<=Math.max(oldPos.y,newPos.y);v++)checkWeapon(getSquareValue(oldPos.x,v));whoIsActive(),player1Active?(playerPosition=getPosition(".player2"),oldPos=getXYPosition(playerPosition),$(".player1").removeClass("player1").removeClass("active"),$(this).addClass("player1"),$(".player2").addClass("active"),fight(newPos,oldPos),player1Active=!1):computerPlay?player1Active=!0:(playerPosition=getPosition(".player1"),oldPos=getXYPosition(playerPosition),$(".player2").removeClass("player2").removeClass("active"),$(this).addClass("player2"),$(".player1").addClass("active"),fight(newPos,oldPos),player1Active=!0)}})}function GetPlayerActive(e,a,t,o,r,l){playerActive=e,playerNotActive=a,playerActiveDiv=t,playerNotActiveDiv=o,$(o+" .player-avatar").css("backgroundImage","url("+r+")"),$(t+" .player-avatar").css("backgroundImage","url("+l+")")}function whoIsActive(){player1Active?GetPlayerActive(player1,player2,"#player-1","#player-2",player2Avatar.active,player1Avatar.notActive):GetPlayerActive(player2,player1,"#player-2","#player-1",player1Avatar.active,player2Avatar.notActive)}function Weapon(e,a,t){this.type=e,this.value=a,this.itemClass=t}function changeWeaponValue(e,a,t){a.damage=t.value,$(e+" .weapon-value").text(a.damage)}function removePlayerWeapon(e,a){$(e+" .belt").removeClass(a.weapon)}function addPlayerWeapon(e,a){$(e+" .belt").addClass(a.weapon)}function changeWeapon(e,a,t){var o=$(".box[boxID = "+e+"]");whoIsActive(),o.removeClass(a).addClass(playerActive.weapon),removePlayerWeapon(playerActiveDiv,playerActive),playerActive.weapon=a,addPlayerWeapon(playerActiveDiv,playerActive),changeWeaponValue(playerActiveDiv,playerActive,t,t.value)}function extraPoints(e,a,t,o,r,l,s){e.score=r?e.score+t.value:e.score-t.value,$(a+" .score").text(e.score),$("."+o).removeClass(o+" weapon"),$(a+" .message").text(l+s+" "+t.value)}function checkWeapon(e){var a=$(".box[boxID = "+e+"]");if(a.hasClass("weapon")){if(a.hasClass("combat1"))return whoIsActive(),void extraPoints(playerActive,playerActiveDiv,combat1,"combat1",!0,"You just beat the penguin and ","got");if(a.hasClass("combat2"))return whoIsActive(),void extraPoints(playerActive,playerActiveDiv,combat2,"combat2",!1,"You just lost against the penguin and ","lost");if(a.hasClass("combat3"))return whoIsActive(),void extraPoints(playerActive,playerActiveDiv,combat3,"combat3",!0,"You just beat the penguin and ","got");if(a.hasClass("combat4"))return whoIsActive(),void extraPoints(playerActive,playerActiveDiv,combat4,"combat4",!1,"You just lost against the penguin and ","lost");if(a.hasClass("scroll"))return whoIsActive(),void extraPoints(playerActive,playerActiveDiv,scroll,"scroll",!0,"You just did a seminar and ","got");if(a.hasClass("whiteBelt"))return void changeWeapon(e,"whiteBelt",whiteBelt);if(a.hasClass("yellowBelt"))return void changeWeapon(e,"yellowBelt",yellowBelt);if(a.hasClass("greenBelt"))return void changeWeapon(e,"greenBelt",greenBelt);if(a.hasClass("blueBelt"))return void changeWeapon(e,"blueBelt",blueBelt);if(a.hasClass("redBelt"))return void changeWeapon(e,"redBelt",redBelt);if(a.hasClass("blackBelt"))return void changeWeapon(e,"blackBelt",blackBelt)}}function addItem(e,a){squares=[];for(var t=$(".box"),o=!0;o;){var r=getRandom(boardSize);if((1===a?r%10==0:2===a?r%10==9:r%10!=0&&r%10!=9)&&remainingSquares.includes(r)){t.eq(r).addClass(e);var l=remainingSquares.indexOf(r);remainingSquares.splice(l,1),o=!1}}}function loadGame(){game.createBoard();for(var e=0;e<numObstacles;e+=1)game.obstacles("obstacle");blackBelt.add(),redBelt.add(),blueBelt.add(),greenBelt.add(),yellowBelt.add(),player1.add(),player2.add(),combat1.add(),combat2.add(),combat3.add(),combat4.add(),scroll.add(),setPlayerData("#player-1",player1),setPlayerData("#player-2",player2),$(".player1").addClass("active")}function getRandom(e){return Math.floor(Math.random()*e)}function getXYPosition(e){return{x:e%10,y:Math.floor(e/10)}}function getSquareValue(e,a){return 10*a+e}function CanAttackAndDefend(e,a){$(a+" .attack").show(),$(a+" .defend").show(),$(e+" .attack").hide(),$(e+" .defend").hide()}function message(e,a,t,o){$(a+" .message").text(t.name+" just hit you  - "+t.damage+" points"),$(e+" .message").text("You just attacked")}function CanOnlyAttack(e,a){$(a+" .attack").show(),$(e+" .attack").show(),$(a+" .defend").hide(),$(e+" .defend").hide()}function fight(e,a){if(e.y===a.y&&e.x<=a.x+1&&e.x>=a.x-1||e.x===a.x&&e.y<=a.y+1&&e.y>=a.y-1){move=!1,hover=!1,$(".box").css("cursor","not-allowed"),$(this).css("backgroundImage","");for(var t=Math.min(a.x,e.x);t<=Math.max(a.x,e.x);t++){var o=getSquareValue(t,a.y),r=$(".box[boxID = "+o+"]");if(player1Active){if(r.hasClass("player2"))return attacked=!0,void attack(e,a)}else if(r.hasClass("player1"))return attacked=!0,void attack(e,a)}}}function changeScore(e,a,t){defended?(t.score=t.score-.5*a.damage,defended=!1):t.score=t.score-a.damage,$(e+" .score").text(t.score)}function attack(){attacked&&(whoIsActive(),changeScore(playerNotActiveDiv,playerActive,playerNotActive),CanAttackAndDefend(playerActiveDiv,playerNotActiveDiv),message(playerActiveDiv,playerNotActiveDiv,playerActive,playerNotActive),player1AvatarDiv.css("backgroundImage","url("+player1Avatar.attack+")"),player2AvatarDiv.css("backgroundImage","url("+player2Avatar.attack+")"),player1Active?(activeClass(".player1",".player2"),player1Defended=!1,player1Active=!1):(activeClass(".player2",".player1"),player2Defended=!1,player1Active=!0),playerNotActive.score<=0&&gameOver(playerActiveDiv,playerNotActiveDiv,playerActive,playerNotActive))}function activeClass(e,a){$(e).removeClass("active"),$(a).addClass("active")}function defend(){defended=!0,whoIsActive(),player1Active?(activeClass(".player1",".player2"),player1Defended=!0,player1Active=!1):(activeClass(".player2",".player1"),player2Defended=!0,player1Active=!0),player1Defended&&player2Defended?CanOnlyAttack(playerActiveDiv,playerNotActiveDiv):CanAttackAndDefend(playerActiveDiv,playerNotActiveDiv),$(playerActiveDiv+" .message").text("you just defended")}function gameOver(e,a,t,o){$(a+" .score").text("0"),$(e+" .message").text("You Win"),$(a+" .message").text("You Lose"),$(a+" .attack").hide(),$(a+" .defend").hide(),player1Active?($(a+" .player-avatar").css("backgroundImage","url("+player1Avatar.dead+")"),$(e+" .player-avatar").css("backgroundImage","url("+player2Avatar.win+")").css("width","150px").css("height","150px")):($(a+" .player-avatar").css("backgroundImage","url("+player2Avatar.dead+")"),$(e+" .player-avatar").css("backgroundImage","url("+player1Avatar.win+")").css("width","150px").css("height","150px")),$(".box").remove(),boardGameDiv.hide(),gameOverDiv.show(),body.css("background-color","#ff6666"),playerNameDiv.css("color","#fff"),messageDiv.addClass("win"),winnerDiv.text(t.name+" you are the WINNER")}var boardSize=89,numObstacles=10,squares=[],remainingSquares=squares,maxMoves=3,newPos=void 0,playerActive=void 0,playerNotActive=void 0,playerActiveDiv=void 0,playerNotActiveDiv=void 0,player1Active=!0,move=!0,attacked=!1,defended=!1,player1Defended=!1,player2Defended=!1,hover=!1,attackButton=$(".attack"),defendButton=$(".defend"),startButton=$("#start"),playAgainButton=$("#play-again"),boardGameDiv=$("#board-game"),gameOverDiv=$("#game-over"),startGameDiv=$("#start-game"),playerContainerDiv=$(".player-container"),body=$("body"),messageDiv=$(".message"),playerNameDiv=$(".player-name"),winnerDiv=$(".winner"),player1AvatarDiv=$("#player-1-avatar"),player2AvatarDiv=$("#player-2-avatar"),computerPlay=!1,alertMove="That square is not a valid move. You can only move a max of 3 spaces vertical or horizontal You cant land on a tree or jump over it. Is it even your go?",alertPlayer="you cant land on a player or pass over a player",alertAttackDefend="you must attack or defend",alertMustMove="you must move";GameBoard.prototype.createBoard=function(){for(var e=0;e<=boardSize;e+=1){boardGameDiv.append('<li class="box" boxID="'+e+'"></li>');var a=$(".box").length;squares.push(a)}},GameBoard.prototype.obstacles=function(e){addItem(e)};var game=new GameBoard(boardSize);Player.prototype.add=function(){addItem(this.itemClass,this.player)};var player1=new Player("Player 1",100,"player1",1,"whiteBelt",10,"avatar"),player2=new Player("Player 2",100,"player2",2,"whiteBelt",10,"avatar"),player1Avatar=new Avatar("src/player1-active.png","src/player1-not-active.png","src/player1-attack.png","src/player1-win.png","src/player1-dead.png"),player2Avatar=new Avatar("src/player2-active.png","src/player2-not-active.png","src/player2-attack.png","src/player2-win.png","src/player2-dead.png");Weapon.prototype.add=function(){addItem(this.itemClass)};var blackBelt=new Weapon("BlackBelt",70,"blackBelt weapon","avatarWin"),redBelt=new Weapon("RedBelt",60,"redBelt weapon"),blueBelt=new Weapon("BlueBelt",40,"blueBelt weapon"),greenBelt=new Weapon("GreenBelt",30,"greenBelt weapon"),yellowBelt=new Weapon("YellowBelt",20,"yellowBelt weapon"),whiteBelt=new Weapon("WhiteBelt",10,"whiteBelt weapon"),combat1=new Weapon("combat1",40,"combat1 weapon"),combat2=new Weapon("combat2",20,"combat2 weapon"),combat3=new Weapon("combat3",30,"combat3 weapon"),combat4=new Weapon("combat4",30,"combat3 weapon"),scroll=new Weapon("scroll",20,"scroll weapon");attackButton.hide(),defendButton.hide(),playerContainerDiv.hide(),boardGameDiv.hide(),gameOverDiv.hide(),startButton.on("click",function(){playerContainerDiv.show(),playerContainerDiv.css("display","flex"),boardGameDiv.show(),startGameDiv.hide(),body.css("background-color","white")}),loadGame(),movePlayer();var getPosition=function(e){return $(e).attr("boxID")},playerPosition=getPosition(".player1"),oldPos=getXYPosition(playerPosition);attackButton.on("click",function(){attack(newPos,oldPos),attacked=!0}),defendButton.on("click",function(){defend(newPos,oldPos),defended=!0}),playAgainButton.on("click",function(e){messageDiv.removeClass("win"),body.css("background-color","#fff"),gameOverDiv.hide(),boardGameDiv.show(),player1=new Player("Player 1",100,"player1",1,"whiteBelt",10),player2=new Player("Player 2",100,"player2",2,"whiteBelt",10),player1Active=!0,move=!0,attacked=!1,defended=!1,player1Defended=!1,player2Defended=!1,$(playerNotActiveDiv+" .message").text(""),$(playerActiveDiv+" .message").text(""),playerNameDiv.css("color",""),$(".player-avatar").css("width","75px").css("height","75px"),loadGame(),playerPosition=getPosition(".player1"),oldPos=getXYPosition(playerPosition),movePlayer()});